.header{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:var(--color-bg-medium);gap:16px}.header-title{display:flex;align-items:center;gap:12px}.header-icon{font-size:24px;animation:float 2s ease-in-out infinite}.header-title h1{font-size:14px;color:var(--color-accent);text-shadow:2px 2px 0 var(--color-bg-dark);letter-spacing:2px}.header-status{flex:1;display:flex;justify-content:center}.selected-persona{display:flex;align-items:center;gap:12px;padding:8px 16px;background:var(--color-bg-light);border:2px solid var(--color-border)}.persona-avatar{font-size:20px}.persona-info{display:flex;flex-direction:column;gap:2px}.persona-name{color:var(--color-text);font-size:10px}.persona-role{color:var(--color-text-dim);font-size:8px}.busy-indicator{color:var(--color-warning);font-size:8px;animation:blink .8s infinite}.no-selection{color:var(--color-text-dim);font-size:8px}.header-controls button{min-width:100px}.header-controls button.paused{background:var(--color-success);color:var(--color-bg-dark)}.persona{position:absolute;width:var(--tile-size);height:var(--tile-size);display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:left .2s ease,top .2s ease;z-index:10}.persona:hover{z-index:20}.persona-label{position:absolute;top:-16px;left:50%;transform:translate(-50%);font-size:6px;color:var(--color-text);background:var(--color-bg-dark);padding:2px 4px;border:1px solid var(--persona-color);white-space:nowrap;opacity:0;transition:opacity .2s}.persona:hover .persona-label,.persona.selected .persona-label{opacity:1}.persona-sprite{width:28px;height:28px;display:flex;justify-content:center;align-items:center;background:var(--persona-color);border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px #00000080;transition:transform .1s}.persona-avatar{font-size:14px}.persona.moving .persona-sprite{animation:bounce .2s ease infinite}.persona.selected .persona-sprite{transform:scale(1.2);box-shadow:0 0 0 3px var(--color-accent),0 4px 8px #00000080}.persona.busy .persona-sprite{animation:pulse 1s ease infinite}.thinking-bubble{position:absolute;top:-8px;right:-4px;font-size:12px;animation:float 1s ease-in-out infinite}.selection-indicator{position:absolute;bottom:-4px;left:50%;transform:translate(-50%);width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:8px solid var(--color-accent);animation:blink .8s infinite}@keyframes bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-4px)}}.game-world{background:var(--color-bg-medium);padding:16px;display:flex;justify-content:center;align-items:center}.map-container{position:relative;width:calc(14 * var(--tile-size));height:calc(10 * var(--tile-size))}.tile-grid{display:grid;grid-template-columns:repeat(14,var(--tile-size));grid-template-rows:repeat(10,var(--tile-size));gap:0}.persona-layer{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.persona-layer>*{pointer-events:auto}.message{display:flex;gap:8px}.message.user{flex-direction:row-reverse}.message-avatar{width:28px;height:28px;display:flex;justify-content:center;align-items:center;background:var(--color-bg-light);border:2px solid var(--color-border);border-radius:4px;font-size:14px;flex-shrink:0}.message-content{flex:1;min-width:0}.message.user .message-content{display:flex;flex-direction:column;align-items:flex-end}.message-header{display:flex;gap:8px;align-items:center;margin-bottom:4px}.message.user .message-header{flex-direction:row-reverse}.message-sender{font-size:8px;color:var(--color-text)}.message-time{font-size:6px;color:var(--color-text-dim)}.message-bubble{background:var(--color-bg-medium);padding:8px 12px;font-size:8px;line-height:1.6;border-left:3px solid var(--color-border);max-width:90%}.message.user .message-bubble{border-left:none;border-right:3px solid var(--color-accent);background:var(--color-bg-light)}.chat-panel{flex:1;display:flex;flex-direction:column;background:var(--color-bg-medium);min-height:0}.chat-header{display:flex;justify-content:space-between;align-items:center;padding:8px 12px;background:var(--color-bg-light);border-bottom:2px solid var(--color-border)}.chat-title{font-size:10px;color:var(--color-accent)}.clear-btn{font-size:6px;padding:4px 8px;background:var(--color-bg-medium)}.chat-messages{flex:1;overflow-y:auto;padding:12px;display:flex;flex-direction:column;gap:12px;background:var(--color-bg-dark);min-height:0}.no-persona-message{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:var(--color-text-dim);text-align:center;gap:12px}.no-persona-message span{font-size:32px;opacity:.5}.no-persona-message p{font-size:8px;line-height:1.8}.chat-input-form{display:flex;gap:8px;padding:12px;background:var(--color-bg-light);border-top:2px solid var(--color-border)}.chat-input-form input{flex:1;min-width:0}.chat-input-form button{min-width:60px}.chat-input-form button:disabled{opacity:.5;cursor:not-allowed}.chat-input-form input:disabled{opacity:.5;cursor:not-allowed}.thinking-log{height:200px;display:flex;flex-direction:column;background:var(--color-bg-medium)}.thinking-header{display:flex;justify-content:space-between;align-items:center;padding:8px 12px;background:var(--color-bg-light);border-bottom:2px solid var(--color-border)}.thinking-title{font-size:10px;color:var(--color-warning)}.autoscroll-btn{font-size:6px;padding:4px 8px;background:var(--color-bg-medium)}.autoscroll-btn.active{background:var(--color-success);color:var(--color-bg-dark)}.thinking-content{flex:1;overflow-y:auto;padding:8px;background:#0a0a14;font-family:monospace;font-size:9px;line-height:1.6}.empty-log{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:var(--color-text-dim);text-align:center;gap:8px}.empty-log span{font-size:24px;opacity:.5}.empty-log p{font-size:8px}.thinking-entry{display:flex;gap:8px;padding:4px 0;border-bottom:1px solid rgba(255,255,255,.05)}.thinking-entry:last-child{border-bottom:none}.entry-time{color:var(--color-text-dim);flex-shrink:0}.entry-persona{font-weight:700;flex-shrink:0}.entry-content{color:var(--color-text);word-break:break-word}.thinking-entry:last-child .entry-content:after{content:"â–Œ";animation:blink 1s infinite;color:var(--color-success)}.app{display:flex;flex-direction:column;height:100vh;width:100vw;overflow:hidden;background:var(--color-bg-dark)}.main-content{display:flex;flex:1;gap:8px;padding:8px;overflow:hidden}.game-area{flex:1;min-width:0;display:flex;justify-content:center;align-items:center}.sidebar{width:350px;display:flex;flex-direction:column;gap:8px;min-height:0}.pause-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:#000000b3;display:flex;justify-content:center;align-items:center;z-index:100}.pause-overlay span{font-size:32px;color:var(--color-warning);animation:blink 1s infinite;text-shadow:4px 4px 0 var(--color-bg-dark)}@media (max-width: 900px){.main-content{flex-direction:column}.sidebar{width:100%;flex-direction:row;height:300px}.sidebar>*{flex:1;min-width:0}}:root{--color-bg-dark: #1a1a2e;--color-bg-medium: #16213e;--color-bg-light: #0f3460;--color-primary: #e94560;--color-secondary: #533483;--color-accent: #00d9ff;--color-text: #eaeaea;--color-text-dim: #888;--color-border: #4a4a6a;--color-success: #00ff88;--color-warning: #ffcc00;--pixel: 4px;--tile-size: 32px;font-family:"Press Start 2P",cursive;font-size:10px;line-height:1.6}*{margin:0;padding:0;box-sizing:border-box}html,body,#root{height:100%;width:100%;overflow:hidden}body{background-color:var(--color-bg-dark);color:var(--color-text);image-rendering:pixelated;image-rendering:crisp-edges}.pixel-border{border:var(--pixel) solid var(--color-border);box-shadow:inset calc(var(--pixel) * -1) calc(var(--pixel) * -1) 0 0 #2a2a4a,inset var(--pixel) var(--pixel) 0 0 #6a6a8a}.pixel-border-inset{border:var(--pixel) solid var(--color-border);box-shadow:inset var(--pixel) var(--pixel) 0 0 #1a1a2a,inset calc(var(--pixel) * -1) calc(var(--pixel) * -1) 0 0 #4a4a6a}::-webkit-scrollbar{width:12px;height:12px}::-webkit-scrollbar-track{background:var(--color-bg-dark);border:2px solid var(--color-border)}::-webkit-scrollbar-thumb{background:var(--color-bg-light);border:2px solid var(--color-border)}::-webkit-scrollbar-thumb:hover{background:var(--color-secondary)}button{font-family:"Press Start 2P",cursive;font-size:8px;background:var(--color-bg-light);color:var(--color-text);border:var(--pixel) solid var(--color-border);padding:8px 12px;cursor:pointer;box-shadow:inset calc(var(--pixel) * -1) calc(var(--pixel) * -1) 0 0 #0a1a30,inset var(--pixel) var(--pixel) 0 0 #1f4a70;transition:all .1s}button:hover{background:var(--color-secondary)}button:active{box-shadow:inset var(--pixel) var(--pixel) 0 0 #0a1a30,inset calc(var(--pixel) * -1) calc(var(--pixel) * -1) 0 0 #1f4a70;transform:translate(2px,2px)}input,textarea{font-family:"Press Start 2P",cursive;font-size:8px;background:var(--color-bg-dark);color:var(--color-text);border:var(--pixel) solid var(--color-border);padding:8px;outline:none;box-shadow:inset var(--pixel) var(--pixel) 0 0 #0a0a1e,inset calc(var(--pixel) * -1) calc(var(--pixel) * -1) 0 0 #2a2a4a}input:focus,textarea:focus{border-color:var(--color-accent)}@keyframes blink{0%,50%{opacity:1}51%,to{opacity:0}}@keyframes pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}@keyframes float{0%,to{transform:translateY(0)}50%{transform:translateY(-4px)}}.crt-effect:after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;pointer-events:none;background:repeating-linear-gradient(0deg,rgba(0,0,0,.1) 0px,rgba(0,0,0,.1) 1px,transparent 1px,transparent 2px)}
